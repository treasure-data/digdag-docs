

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>require&gt;: Depends on another workflow &mdash; Digdag 0.10.5 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="loop&gt;: Repeat tasks" href="loop.html" />
    <link rel="prev" title="http_call&gt;: Call workflow fetched by HTTP" href="http_call.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Digdag
          

          
          </a>

          
            
            
              <div class="version">
                0.10
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts.html">Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflow_definition.html">Workflow definition</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scheduling_workflow.html">Scheduling workflow</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../operators.html">Operators</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="workflow_control.html">Workflow control operators</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="call.html">call&gt;: Calls another workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="http_call.html">http_call&gt;: Call workflow fetched by HTTP</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">require&gt;: Depends on another workflow</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#options">Options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#notes">Notes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="loop.html">loop&gt;: Repeat tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="for_each.html">for_each&gt;: Repeat tasks for values</a></li>
<li class="toctree-l3"><a class="reference internal" href="for_range.html">for_range&gt;: Repeat tasks for a range</a></li>
<li class="toctree-l3"><a class="reference internal" href="if.html">if&gt;: Conditional execution</a></li>
<li class="toctree-l3"><a class="reference internal" href="fail.html">fail&gt;: Makes the workflow failed</a></li>
<li class="toctree-l3"><a class="reference internal" href="echo.html">echo&gt;: Shows a message</a></li>
<li class="toctree-l3"><a class="reference internal" href="wait.html">wait&gt;: Wait for a specific duration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="treasure_data.html">Treasure Data operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="database.html">Database operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="network.html">Network operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="aws.html">Amazon Web Services operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="gcp.html">Google Cloud Platform operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="scripting.html">Scripting operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="param.html">Param operators</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../command_reference.html">Command reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python_api.html">Language API - Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ruby_api.html">Language API - Ruby</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rest_api.html">REST API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../command_executor.html">Command Executor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../internal.html">Internal architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../metrics.html">Digdag metrics (experimental)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community_contributions.html">Community Contributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../logo.html">Logo</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Digdag</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../operators.html">Operators</a> &raquo;</li>
        
          <li><a href="workflow_control.html">Workflow control operators</a> &raquo;</li>
        
      <li>require&gt;: Depends on another workflow</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/operators/require.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="require-depends-on-another-workflow">
<h1>require&gt;: Depends on another workflow<a class="headerlink" href="#require-depends-on-another-workflow" title="Permalink to this headline">¶</a></h1>
<p><strong>require&gt;</strong> operator requires completion of another workflow. This operator is similar to <a class="reference external" href="call.html">call&gt; operator</a>, but this operator doesn’t start the other workflow if it’s already running or has done for the same session time of this workflow. If the workflow is running or newly started, this operator waits until it completes. In  addition, require operator can kick the another project’s workflow.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># workflow1.dig</span>
<span class="o">+</span><span class="n">step1</span><span class="p">:</span>
  <span class="n">require</span><span class="o">&gt;</span><span class="p">:</span> <span class="n">another_workflow</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># another_workflow.dig</span>
<span class="o">+</span><span class="n">step2</span><span class="p">:</span>
  <span class="n">sh</span><span class="o">&gt;</span><span class="p">:</span> <span class="n">tasks</span><span class="o">/</span><span class="n">step2</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<div class="section" id="options">
<h2>Options<a class="headerlink" href="#options" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p><strong>require&gt;</strong>: NAME</p>
<p>Name of a workflow.</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">require</span><span class="o">&gt;</span><span class="p">:</span> <span class="n">another_workflow</span>
</pre></div>
</div>
</li>
<li><p><strong>session_time</strong>: ISO_TIME_WITH_ZONE</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">require</span><span class="o">&gt;</span><span class="p">:</span> <span class="n">another_workflow</span>
<span class="n">session_time</span><span class="p">:</span> <span class="mi">2017</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="o">+</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>timezone: UTC

schedule:
  monthly&gt;: 1,09:00:00

+depend_on_all_daily_workflow_in_month:
  loop&gt;: ${moment(last_session_time).daysInMonth()}
  _do:
    require&gt;: daily_workflow
    session_time: ${moment(last_session_time).add(i, &#39;day&#39;).format()}
</pre></div>
</div>
</li>
<li><p><strong>project_id</strong>: project_id</p></li>
<li><p><strong>project_name</strong>: project_name</p>
<p>You can kick another project’s workflow by setting project_id or project_name.
If the project does not exist, the task will fail.
If you set both project_id and project_name, the task will fail.</p>
<p>Examples 1:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">require</span><span class="o">&gt;</span><span class="p">:</span> <span class="n">another_project_wf</span>
<span class="n">project_id</span><span class="p">:</span> <span class="mi">12345</span>
</pre></div>
</div>
<p>Examples 2:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">require</span><span class="o">&gt;</span><span class="p">:</span> <span class="n">another_project_wf</span>
<span class="n">project_name</span><span class="p">:</span> <span class="n">another_project</span>
</pre></div>
</div>
</li>
<li><p><strong>rerun_on</strong>: none, failed, all (default: none)</p>
<p><em>rerun_on</em> control require&gt; really kicks or not if the attempt for the dependent workflow already exists.</p>
<ul class="simple">
<li><p><em>none</em> … Not kick the workflow if the attempt already exists.</p></li>
<li><p><em>failed</em> … Kick the workflow if the attempt exists and its result is not success.</p></li>
<li><p><em>all</em> … require&gt; kick the workflow regardless of the result of the attempt.</p></li>
</ul>
</li>
<li><p><strong>ignore_failure</strong>: BOOLEAN</p>
<p>This operator fails when the dependent workflow finished with errors by default.</p>
<p>But if <code class="docutils literal notranslate"><span class="pre">ignore_failure:</span> <span class="pre">true</span></code> is set, this operator succeeds even when the workflow finished with errors.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">require</span><span class="o">&gt;</span><span class="p">:</span> <span class="n">another_workflow</span>
<span class="n">ignore_failure</span><span class="p">:</span> <span class="n">true</span>
</pre></div>
</div>
<p>require&gt; evaluates <em>ignore_failure</em> at last of its process. If rerun_on is set and require&gt; run new attempt, the result of new attempt is checked.</p>
</li>
<li><p><strong>params</strong>: MAP</p>
<p>This operator doesn’t pass a parameter to another workflow. <code class="docutils literal notranslate"><span class="pre">params</span></code> options set parameters.</p>
<p>Examples:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">+example</span><span class="p">:</span>
  <span class="nt">require&gt;</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">child</span>
  <span class="nt">params</span><span class="p">:</span>
    <span class="nt">param_name1</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">${parent_param_name}</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="notes">
<h2>Notes<a class="headerlink" href="#notes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>require&gt; has been changed to ignore inherited <em>retry_attempt_name</em> parameter.
<code class="docutils literal notranslate"><span class="pre">digdag</span> <span class="pre">retry</span></code> command generates unique retry_attempt_name to run, but it is not passed to require&gt;.</p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="loop.html" class="btn btn-neutral float-right" title="loop&gt;: Repeat tasks" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="http_call.html" class="btn btn-neutral float-left" title="http_call&gt;: Call workflow fetched by HTTP" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2023, Digdag Project

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
    <br/>
    <br/>
    <p><a href="https://digdag.io/">Digdag</a> is an open source project, invented and sponsored by <a href="https://www.treasuredata.com/">Treasure Data, Inc.</a> under the Apache 2.0 Licence.</p>
     


</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>http&gt;: Making HTTP requests &mdash; Digdag 0.10.5 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Amazon Web Services operators" href="aws.html" />
    <link rel="prev" title="mail&gt;: Sending email" href="mail.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Digdag
          

          
          </a>

          
            
            
              <div class="version">
                0.10
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts.html">Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflow_definition.html">Workflow definition</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scheduling_workflow.html">Scheduling workflow</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../operators.html">Operators</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="workflow_control.html">Workflow control operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="treasure_data.html">Treasure Data operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="database.html">Database operators</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="network.html">Network operators</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="mail.html">mail&gt;: Sending email</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">http&gt;: Making HTTP requests</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#secrets">Secrets</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parameters">Parameters</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="aws.html">Amazon Web Services operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="gcp.html">Google Cloud Platform operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="scripting.html">Scripting operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="param.html">Param operators</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../command_reference.html">Command reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python_api.html">Language API - Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ruby_api.html">Language API - Ruby</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rest_api.html">REST API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../command_executor.html">Command Executor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../internal.html">Internal architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../metrics.html">Digdag metrics (experimental)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community_contributions.html">Community Contributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../logo.html">Logo</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Digdag</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../operators.html">Operators</a> &raquo;</li>
        
          <li><a href="network.html">Network operators</a> &raquo;</li>
        
      <li>http&gt;: Making HTTP requests</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/operators/http.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="http-making-http-requests">
<h1>http&gt;: Making HTTP requests<a class="headerlink" href="#http-making-http-requests" title="Permalink to this headline">¶</a></h1>
<p><strong>http&gt;</strong> operator can be used to make HTTP requests.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>+fetch:
  http&gt;: https://api.example.com/foobars
  store_content: true

+process:
  for_each&gt;:
    foobar: ${http.last_content}
  _do:
    bq&gt;: query.sql
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>+notify:
  http&gt;: https://api.example.com/data/sessions/${session_uuid}
  method: POST
  content:
    status: RUNNING
    time: ${session_time}
</pre></div>
</div>
<div class="section" id="secrets">
<h2>Secrets<a class="headerlink" href="#secrets" title="Permalink to this headline">¶</a></h2>
<p>When you set those parameters, use <a class="reference external" href="https://docs.digdag.io/command_reference.html#secrets">digdag secrets command</a>.</p>
<ul>
<li><p><strong>http.authorization</strong>: STRING</p>
<p>A string that should be included in the HTTP request as the value of the <code class="docutils literal notranslate"><span class="pre">Authorization</span></code> header. This can be used to authenticate using e.g. Oauth bearer tokens.</p>
</li>
<li><p><strong>http.user</strong>: STRING</p>
<p>A user that should be used to authenticate using <em>Basic Authentication</em>.</p>
</li>
<li><p><strong>http.password</strong>: STRING</p>
<p>A password that should be used to authenticate using <em>Basic Authentication</em>.</p>
</li>
<li><p><strong>http.uri</strong>: URI</p>
<p>The URI of the HTTP request. This can be used instead of putting the URI on the operator command line in case the URI contains sensitive information.</p>
</li>
</ul>
</div>
<div class="section" id="parameters">
<h2>Parameters<a class="headerlink" href="#parameters" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p><strong>http&gt;</strong>: URI</p>
<p>The URI of the HTTP request.</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http</span><span class="o">&gt;</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">api</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">foobar</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>http&gt;: https://api.example.com/data/sessions/${session_uuid}
</pre></div>
</div>
</li>
<li><p><strong>method</strong>: STRING</p>
<p>The method of the HTTP request. <em>Default:</em> <code class="docutils literal notranslate"><span class="pre">GET</span></code>.</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">method</span><span class="p">:</span> <span class="n">POST</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">method</span><span class="p">:</span> <span class="n">DELETE</span>
</pre></div>
</div>
</li>
<li><p><strong>content</strong>: STRING | INTEGER | BOOLEAN | OBJECT | ARRAY
The content of the HTTP request. <em>Default:</em> No content.</p>
<p>Scalars (i.e. strings, integers, booleans, etc) will by default be sent as plain text. Objects and arrays will by default be JSON serialized. The <code class="docutils literal notranslate"><span class="pre">content_format</span></code> parameter can be used to control the content serialization format.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">content</span><span class="p">:</span> <span class="s1">&#39;hello world&#39;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">content</span><span class="p">:</span> <span class="s1">&#39;$</span><span class="si">{session_time}</span><span class="s1">&#39;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>content:
  status: RUNNING
  time: ${session_time}
</pre></div>
</div>
</li>
<li><p><strong>content_format</strong>: text | json | form</p>
<p>The serialization format of the content of the HTTP request. <em>Default:</em> Inferred from the <code class="docutils literal notranslate"><span class="pre">content</span></code> parameter value type. Objects and arrays use <code class="docutils literal notranslate"><span class="pre">json</span></code> by default. Other value types default to <code class="docutils literal notranslate"><span class="pre">text</span></code>.</p>
<ul class="simple">
<li><p><strong>text</strong>: Send raw content as <code class="docutils literal notranslate"><span class="pre">Content-Type:</span> <span class="pre">text/plain</span></code>. <em>Note:</em> This requires that the <code class="docutils literal notranslate"><span class="pre">content</span></code> parameter is <em>not</em> array or an object.</p></li>
<li><p><strong>json</strong>: Serialize the content as <a class="reference external" href="http://json.org/">JSON</a> and send it as <code class="docutils literal notranslate"><span class="pre">Content-Type:</span> <span class="pre">application/json</span></code>. This format can handle any <code class="docutils literal notranslate"><span class="pre">content</span></code> parameter value type.</p></li>
<li><p><strong>form</strong>: Encode content as an HTML form and send it as <code class="docutils literal notranslate"><span class="pre">Content-Type:</span> <span class="pre">application/x-www-form-urlencoded</span></code>. <em>Note:</em> This requires the <code class="docutils literal notranslate"><span class="pre">content</span></code> parameter value to be an object.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">content</span><span class="p">:</span> <span class="s1">&#39;hello world @ $</span><span class="si">{session_time}</span><span class="s1">&#39;</span>
<span class="n">content_format</span><span class="p">:</span> <span class="n">text</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>content:
  status: RUNNING
  time: ${session_time}
content_format: json
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>content:
  status: RUNNING
  time: ${session_time}
content_format: form
</pre></div>
</div>
</li>
<li><p><strong>content_type</strong>: STRING</p>
<p>Override the inferred <code class="docutils literal notranslate"><span class="pre">Content-Type</span></code> header.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>content: |
  &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
  &lt;notification&gt;
    &lt;status&gt;RUNNING&lt;/status&gt;
    &lt;time&gt;${session_time}&lt;/time&gt;
  &lt;/notification&gt;
content_format: text
content_type: application/xml
</pre></div>
</div>
</li>
<li><p><strong>store_content</strong>: BOOLEAN</p>
<p>Whether to store the content of the response. <em>Default:</em> <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
</li>
<li><p><strong>headers</strong>: LIST OF KEY-VALUE PAIRS</p>
<p>Additional custom headers to send with the HTTP request.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">headers</span><span class="p">:</span>
    <span class="o">-</span> <span class="n">Accept</span><span class="p">:</span> <span class="n">application</span><span class="o">/</span><span class="n">json</span>
    <span class="o">-</span> <span class="n">X</span><span class="o">-</span><span class="n">Foo</span><span class="p">:</span> <span class="n">bar</span>
    <span class="o">-</span> <span class="n">Baz</span><span class="p">:</span> <span class="n">quux</span>
</pre></div>
</div>
</li>
<li><p><strong>retry</strong>: BOOLEAN</p>
<p>Whether to retry ephemeral errors. <em>Default:</em> <code class="docutils literal notranslate"><span class="pre">true</span></code> if the request method is <code class="docutils literal notranslate"><span class="pre">GET</span></code>, <code class="docutils literal notranslate"><span class="pre">HEAD</span></code>, <code class="docutils literal notranslate"><span class="pre">OPTIONS</span></code> or <code class="docutils literal notranslate"><span class="pre">TRACE</span></code>. Otherwise <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
<p>Client <code class="docutils literal notranslate"><span class="pre">4xx</span></code> errors (except for <code class="docutils literal notranslate"><span class="pre">408</span> <span class="pre">Request</span> <span class="pre">Timeout</span></code> and <code class="docutils literal notranslate"><span class="pre">429</span> <span class="pre">Too</span> <span class="pre">Many</span> <span class="pre">Requests</span></code>) will not be retried even if <code class="docutils literal notranslate"><span class="pre">retry</span></code> is set to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p>
<p><em>Note:</em> Enabling retries might cause the target endpoint to receive multiple duplicate HTTP requests. Thus retries should only be enabled if duplicated requests are tolerable. E.g. when the outcome of the HTTP request is <em>idempotent</em>.</p>
</li>
<li><p><strong>timeout</strong>: INTEGER</p>
<p>The timeout value used for http operations. <em>Default</em>: <code class="docutils literal notranslate"><span class="pre">30</span></code>(30 seconds).</p>
</li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="aws.html" class="btn btn-neutral float-right" title="Amazon Web Services operators" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="mail.html" class="btn btn-neutral float-left" title="mail&gt;: Sending email" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2023, Digdag Project

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
    <br/>
    <br/>
    <p><a href="https://digdag.io/">Digdag</a> is an open source project, invented and sponsored by <a href="https://www.treasuredata.com/">Treasure Data, Inc.</a> under the Apache 2.0 Licence.</p>
     


</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>